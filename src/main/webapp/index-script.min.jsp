<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<% pageContext.setAttribute("APP_PATH", request.getContextPath()); %>
<script>function renderIndexCarousel(a){indexCarousel&&$(".ml-index-carousel .swiper-wrapper").html("");var e="",o=window.innerWidth>575;a.forEach(function(a,t){var r,i;0==a.slideIfproorcateorpage&&(r=a.slideSeoname),1==a.slideIfproorcateorpage&&(r="search/"+a.slideCateseoname),2==a.slideIfproorcateorpage&&(r=a.slidePageseoname),i=a.slideIfinto?"${APP_PATH}/"+r+".html":"javascript:;",o?a.slidePcstatus&&(e+='<div class="swiper-slide"><a href="'+i+'" class="lazyload" data-src="'+a.slidePcimgurl+'"></a></div>'):a.slideWapstatus&&(e+='<div class="swiper-slide"><a href="'+i+'" class="lazyload" data-src="'+a.slideWapimgurl+'"></a></div>')}),$(".ml-index-carousel .swiper-wrapper").html(e),indexCarousel=new Swiper(".ml-index-carousel",{loop:!0,autoplay:{delay:5e3,stopOnLastSlide:!1,disableOnInteraction:!1},pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}),new LazyLoad($(".ml-index-carousel").find(".lazyload"),{root:null,rootMargin:"10px",threshold:0})}function renderCarouselAd(a,e,o){var t="";e.forEach(function(a,e){var r,i;0==a.slideIfproorcateorpage&&(r=a.slideSeoname),1==a.slideIfproorcateorpage&&(r="search/"+a.slideCateseoname),2==a.slideIfproorcateorpage&&(r=a.slidePageseoname),i=a.slideIfinto?"${APP_PATH}/"+r+".html":"javascript:;",t+=(a.slideWapstatus?'<a class="'+o+'-item shadow-radius wap lazyload" href="'+i+'" data-src="'+a.slideWapimgurl+'"></a>':"")+(a.slideWapstatus?'<a class="'+o+'-item pc shadow-radius lazyload" href="'+i+'" data-src="'+a.slidePcimgurl+'"></a>':"")}),a.html(t)}function renderShowArea(a,e){a.append($('<div class="showarea-banner lazyload wap" data-src="'+e.showareaImgurl+'"></div><div class="showarea-banner lazyload pc" data-src="'+e.showareaImgpcurl+'">'))}function getDisplayAreaData(a,e){$.ajax({url:"${APP_PATH}/MlbackShowArea/getMlbackShowAreaOne",data:JSON.stringify({showareaNumth:a}),type:"post",dataType:"json",contentType:"application/json",success:function(a){100==a.code&&e&&e(a.extend.mlbackShowAreaOne)}})}function getActivityProductData(a,e,o){$.ajax({url:"${APP_PATH}/MlbackActShowPro/getMlbackActShowProListByActnum",data:JSON.stringify({actshowproActnum:a}),type:"post",dataType:"json",contentType:"application/json",async:e,success:function(a){100==a.code&&o&&o(a.extend.mlbackActShowProList||[])}})}function getIntroduceProductData(a,e){$.ajax({url:"${APP_PATH}/MlbackCategory/searchBycategorySeo",data:JSON.stringify({categorySeo:a}),type:"post",dataType:"json",contentType:"application/json",success:function(a){100==a.code&&e&&e(descPrdouct(a.extend.mlbackProductResList||[]))}})}function getIntroduceReviewData(a){$.ajax({url:"${APP_PATH}/MlfrontReview/selectReviewListFrom",data:JSON.stringify({reviewFrom:3}),type:"post",dataType:"json",contentType:"application/json",async:!1,success:function(e){100==e.code&&a&&a(e.extend)}})}function renderActivityProduct(a,e,o){var t="";e.forEach(function(a,e){var r,i;0==a.actshowproIfproorcate&&(r=a.actshowproSeoname),1==a.actshowproIfproorcate&&(r="search/"+a.actshowproCateseoname),2==a.actshowproIfproorcate&&(r=a.actshowproPageseoname),i=r?r+".html":"javascript:;",t+='<a class="'+o+'-item wap shadow-radius lazyload" href="'+i+'" data-src="'+a.actshowproImgwapurl+'"></a><a class="'+o+'-item pc shadow-radius lazyload" href="'+i+'" data-src="'+a.actshowproImgpcurl+'"></a>'}),a.html(t)}function hotFive(){!hasHotFive&&getActivityProductData(9,!1,function(a){var e="",o=$("#hot-five");a.length&&a.forEach(function(a,o){var t,r;0==a.actshowproIfproorcate&&(t=a.actshowproSeoname),1==a.actshowproIfproorcate&&(t="search/"+a.actshowproCateseoname),2==a.actshowproIfproorcate&&(t=a.actshowproPageseoname),r=t?t+".html":"javascript:;",e+='<a class="hot-five-item wap lazyload" href="'+r+'" data-src="'+a.actshowproImgwapurl+'"></a>'}),o.html(e),hasHotFive=!0,new LazyLoad(o.find(".lazyload"),{root:null,rootMargin:"10px",threshold:0})})}function renderProductSlide(a,e,o,t){var r=t?"${APP_PATH}/search/"+t+".html":"javascript:;",i=$('<div class="swiper-slide product-item product-more-img lazyload" data-src="${APP_PATH}/static/pc/img/product-more.jpg"><a href="'+r+'"><div class="product-img"></div><div class="product-more-desc"></div></a></div>'),n=generateSwiperSlideProduct(o).addClass("showaera-container");n.find(".swiper-wrapper").append(t&&i),a.append(n),new Swiper("."+e+" .swiper-container",{slidesPerView:"auto",spaceBetween:5,freeMode:!0,navigation:{nextEl:"."+e+" .swiper-button-next",prevEl:"."+e+" .swiper-button-prev"}})}function renderIntroduceReview(a,e){var o="",t=$('<div class="showaera-review-container" />');e.mlfrontReviewList.forEach(function(a,t){o+='<div class="showarea-review-item shadow-radius lazyload" data-src="'+(e.mlfrontReviewImgList[t][0]&&e.mlfrontReviewImgList[t][0].reviewimgUrl)+'" data-id="'+a.reviewPid+'"></div>'}),t.html(o),a.append(t)}var indexCarousel,indexCarouselData,hasHotFive=!1;getCarouselData(1,!1,function(a){indexCarouselData=a,a.length&&renderIndexCarousel(a)}),hotFive(),getActivityProductData(8,!1,function(a){var e=$("#hot-two");a.length&&renderActivityProduct(e,a,"hot-two"),new LazyLoad(e.find(".lazyload"),{root:null,rootMargin:"10px",threshold:0})}),getCarouselData(2,true,function(a){var e=$("#hot-coupon");a.length&&renderCarouselAd(e,a,"hot-coupon"),new LazyLoad(e.find(".lazyload"),{root:null,rootMargin:"10px",threshold:0})}),getActivityProductData(7,!0,function(a){var e=$("#activity-product");a.length&&renderActivityProduct(e,a,"activity-product"),new LazyLoad(e.find(".lazyload"),{root:null,rootMargin:"10px",threshold:0})}),getActivityProductData(6,!0,function(a){var e=$("#hot-collection");a.length&&renderActivityProduct(e,a,"hot-collection"),new LazyLoad(e.find(".lazyload"),{root:null,rootMargin:"10px",threshold:0})}),getDisplayAreaData(1,function(a){var e=$("#showAreaOne");a&&renderShowArea(e,a),getIntroduceProductData(ml.area_one,function(a){a.length&&renderProductSlide(e,"showAreaOne",a.slice(0,8),ml.area_one),new LazyLoad(e.find(".lazyload"),{root:null,rootMargin:"10px",threshold:0})})}),getDisplayAreaData(2,function(a){var e=$("#showAreaTwo");a&&renderShowArea(e,a),getIntroduceProductData(ml.area_two,function(a){a.length&&renderProductSlide(e,"showAreaTwo",a.slice(0,8),ml.area_two),new LazyLoad(e.find(".lazyload"),{root:null,rootMargin:"10px",threshold:0})})}),getDisplayAreaData(3,function(a){var e=$("#showAreaThree");a&&renderShowArea(e,a),getIntroduceReviewData(function(a){a.mlfrontReviewList.length&&renderIntroduceReview(e,a),new LazyLoad(e.find(".lazyload"),{root:null,rootMargin:"10px",threshold:0})})}),$(document.body).on("click",".showarea-review-item",function(a){var e=$(this).data("id");e&&getOneProductData({productId:e},function(a){var e='<div class="customer-voice"><div class="customer-voice-img lazyload" data-src="'+a.productMainimgurl+'"></div><div class="customer-voice-name">'+a.productName+'</div><div class="customer-voice-dprice"><span class="name">Regular Price :</span><span class="value">$'+a.productOriginalprice.toFixed(2)+'</span></div><div class="customer-voice-nprice"><span class="name">Sale Price :</span><span class="value">$'+(a.productOriginalprice&&a.productActoffoff?accuracyCal(a.productOriginalprice,a.productActoffoff):0)+'</span></div><a class="btn btn-pink" href="'+(a.productSeo?"${APP_PATH}/"+a.productSeo+".html":"jvascrtip:;")+'">Buy Now</a></div>',o=createModal({header:{html:"<p>Customer Voice</p>"},body:{html:e}});new LazyLoad(o.find(".lazyload"),{root:null,rootMargin:"10px",threshold:0})})}),$(window).on("resize",function(){window.innerWidth<575&&debounce(function(){hotFive()}),renderIndexCarousel(indexCarouselData)});</script>
